pipeline {
 agent {
	label 'fonetwish'
	}
 stages {
   stage('Get Current Branch') {
    steps {
		sh "echo Current Branch Name: ${env.BRANCH_NAME}"
     }
   }
   stage('Unit Test') {
    steps {
        sh 'mvn test'
     }
   }
   stage('Maven Clean Install') {
    when {
		anyOf {
			branch 'feature'; branch 'develop'; branch 'main'
		}
    } 	
    steps {
       sh 'mvn clean install'
    }
   }
 post {
    always {
 	echo 'clean up current workspace'
	deleteDir()
  }
 }
}
